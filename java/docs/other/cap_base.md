# <a id="cap">`CAP`理论</a>
`CAP`理论的提出者布鲁尔在提出`CAP`猜想的时候，
并没有详细定义`Consistency`、`Availability`、`Partition Tolerance`三个单词的明确定义。

一般大家的理解是：

在理论计算机科学中，`CAP`定理（`CAP theorem`）指出对于一个分布式系统来说，当设计读写操作时，只能同时满足以下三点中的两个：
- 一致性（`Consistency`）：所有节点访问同一份最新的数据副本
- 可用性（`Availability`）：非故障的节点在合理的时间内返回合理的响应（不是错误或者超时的响应）。
- 分区容错性（`Partition tolerance`）：分布式系统出现网络分区的时候，仍然能够对外提供服务。

## 网络分区
分布式系统中，多个节点之前的网络本来是连通的，但是因为某些故障（比如部分节点网络出了问题）某些节点之间不连通了，整个网络就分成了几块区域，这就叫网络分区。

简单的表述：一致性、可用性、分区容忍性三者你只能同时达到其中两个，不可能同时达到。

**实际上这是一个误导性质的说法。**

最新的解释是：

当发生网络分区的时候，如果我们要继续服务，那么强一致性和可用性只能`2`选`1`。</br>
也就是说当网络分区之后`P`是前提，决定了`P`之后才有`C`和`A`的选择。</br>
也就是说分区容错性（`Partition tolerance`）我们是必须要实现的。</br>

简单的表述：`CAP`理论中分区容错性`P`是一定要满足的，在此基础上，只能满足一致性`C`或者可用性`A`。

因此，分布式系统理论上不可能选择`CA`架构，只能选择`CP`或者`AP`架构。 </br>
比如：
- `ZooKeeper`、`HBase`就是`CP`架构，
- `Cassandra`、`Eureka`就是`AP`架构
- `Nacos`不仅支持`CP`架构也支持`AP`架构。

**为什么不可能选择`CA`架构呢？**

举个例子：若系统出现`分区`，系统中的某个节点在进行写操作。
为了保证`C`（一致性）， 必须要禁止其他节点的读写操作，这就和`A`（可用性）发生冲突了。
如果为了保证`A`（可用性），其他节点的读写操作正常的话，那就和`C`（一致性）发生冲突了。

选择`CP`还是`AP`的关键在于当前的业务场景，没有定论，大部门业务功能是满足`AP`，但是对于需要确保强一致性的场景，如：银行，车票，一般会选择保证`CP`。

**需要补充说明的一点是：如果网络分区正常的话（系统在绝大部分时候所处的状态），也就说不需要保证`P`的时候，`C`和`A`能够同时保证。**

# <a id="cap">`BASE`理论</a>
`BASE`是`Basically Available`（基本可用） 、`Soft-state`（软状态） 和`Eventually Consistent`（最终一致性） 三个的缩写。




----
